{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pierre-Yves\\\\Sync\\\\Emploi\\\\OpenClassroom\\\\Formation JavascriptReact\\\\P13\\\\argentbank-front\\\\src\\\\features\\\\profile\\\\Profile.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selectCurrentToken } from '../auth/authSlice';\nimport { userPending, userFullName } from './userSlice';\nimport { useGetUserMutation } from './userApiSlice';\nimport UserAccounts from '../../components/UserAccount';\nimport UserWelcome from './UserWelcome';\nimport '../../utils/style/_profile.scss';\n\n/**\r\n * Component/page that displays the Profile page\r\n * No props\r\n *\r\n * @namespace\r\n * @component\r\n * @author  Pierre-Yves Léglise <pleglise@pm.me>\r\n * @example\r\n * return{\r\n *  <Profile />\r\n * }\r\n * @returns {JSX.Element}   A JSX.Element that displays the Profile Page\r\n *\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const dispatch = useDispatch();\n  const token = useSelector(selectCurrentToken);\n  const isRemember = useSelector(state => state.auth.isRemember);\n  const userIsLoading = useSelector(state => state.user.isLoading);\n  const [getUser, {\n    data,\n    isLoading,\n    isSuccess,\n    isError,\n    error\n  }] = useGetUserMutation();\n  useEffect(() => {\n    dispatch(userPending());\n    if (token) getUser(token).unwrap();\n  }, [dispatch, getUser, token]);\n  useEffect(() => {\n    if (isSuccess) dispatch(userFullName(data.body));\n  }, [isSuccess, dispatch, data, userIsLoading]);\n  let content = '';\n  if (isLoading) {\n    content = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"temp-div \",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  } else if (isSuccess) {\n    if (isRemember) {\n      localStorage.setItem('firstName', data.body.firstName);\n      localStorage.setItem('lastName', data.body.lastName);\n    } else {\n      localStorage.removeItem('firstName');\n      localStorage.removeItem('lastName');\n    }\n    content = /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main bg-dark\",\n      children: [/*#__PURE__*/_jsxDEV(UserWelcome, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(UserAccounts, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  } else if (isError) {\n    content = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-num\",\n        children: \"ERROR ! \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-txt\",\n        children: [\"Oups!\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), \" \", error.data.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(NavLink, {\n          to: \"/\",\n          children: \"Back to home page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this);\n  }\n  return content;\n};\n_s(Profile, \"Xa0yUzPZqki3eadU1F1fK3C7QCk=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useGetUserMutation];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["useEffect","NavLink","useSelector","useDispatch","selectCurrentToken","userPending","userFullName","useGetUserMutation","UserAccounts","UserWelcome","jsxDEV","_jsxDEV","Profile","_s","dispatch","token","isRemember","state","auth","userIsLoading","user","isLoading","getUser","data","isSuccess","isError","error","unwrap","body","content","className","children","fileName","_jsxFileName","lineNumber","columnNumber","localStorage","setItem","firstName","lastName","removeItem","message","to","_c","$RefreshReg$"],"sources":["C:/Users/Pierre-Yves/Sync/Emploi/OpenClassroom/Formation JavascriptReact/P13/argentbank-front/src/features/profile/Profile.jsx"],"sourcesContent":["import { useEffect } from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { selectCurrentToken } from '../auth/authSlice'\r\nimport { userPending, userFullName } from './userSlice'\r\nimport { useGetUserMutation } from './userApiSlice'\r\nimport UserAccounts from '../../components/UserAccount'\r\nimport UserWelcome from './UserWelcome'\r\nimport '../../utils/style/_profile.scss'\r\n\r\n/**\r\n * Component/page that displays the Profile page\r\n * No props\r\n *\r\n * @namespace\r\n * @component\r\n * @author  Pierre-Yves Léglise <pleglise@pm.me>\r\n * @example\r\n * return{\r\n *  <Profile />\r\n * }\r\n * @returns {JSX.Element}   A JSX.Element that displays the Profile Page\r\n *\r\n */\r\nconst Profile = () => {\r\n  const dispatch = useDispatch()\r\n  const token = useSelector(selectCurrentToken)\r\n  const isRemember = useSelector((state) => state.auth.isRemember)\r\n  const userIsLoading = useSelector((state) => state.user.isLoading)\r\n\r\n  const [getUser, { data, isLoading, isSuccess, isError, error }] =\r\n    useGetUserMutation()\r\n\r\n  useEffect(() => {\r\n    dispatch(userPending())\r\n    if (token) getUser(token).unwrap()\r\n  }, [dispatch, getUser, token])\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) dispatch(userFullName(data.body))\r\n  }, [isSuccess, dispatch, data, userIsLoading])\r\n\r\n  let content = ''\r\n\r\n  if (isLoading) {\r\n    content = (\r\n      <div className=\"temp-div \">\r\n        <h1>Loading...</h1>\r\n      </div>\r\n    )\r\n  } else if (isSuccess) {\r\n    if (isRemember) {\r\n      localStorage.setItem('firstName', data.body.firstName)\r\n      localStorage.setItem('lastName', data.body.lastName)\r\n    } else {\r\n      localStorage.removeItem('firstName')\r\n      localStorage.removeItem('lastName')\r\n    }\r\n\r\n    content = (\r\n      <main className=\"main bg-dark\">\r\n        <UserWelcome />\r\n        <UserAccounts />\r\n      </main>\r\n    )\r\n  } else if (isError) {\r\n    content = (\r\n      <div className=\"error\">\r\n        <p className=\"error-num\">ERROR ! </p>\r\n        <p className=\"error-txt\">\r\n          Oups!\r\n          <br /> {error.data.message}\r\n        </p>\r\n        <p>\r\n          <NavLink to=\"/\">Back to home page</NavLink>\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return content\r\n}\r\nexport default Profile\r\n"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,OAAO,QAAQ,kBAAkB;AAC1C,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,kBAAkB,QAAQ,mBAAmB;AACtD,SAASC,WAAW,EAAEC,YAAY,QAAQ,aAAa;AACvD,SAASC,kBAAkB,QAAQ,gBAAgB;AACnD,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAO,iCAAiC;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA,SAAAC,MAAA,IAAAC,OAAA;AAcA,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAMC,QAAQ,GAAGX,WAAW,EAAE;EAC9B,MAAMY,KAAK,GAAGb,WAAW,CAACE,kBAAkB,CAAC;EAC7C,MAAMY,UAAU,GAAGd,WAAW,CAAEe,KAAK,IAAKA,KAAK,CAACC,IAAI,CAACF,UAAU,CAAC;EAChE,MAAMG,aAAa,GAAGjB,WAAW,CAAEe,KAAK,IAAKA,KAAK,CAACG,IAAI,CAACC,SAAS,CAAC;EAElE,MAAM,CAACC,OAAO,EAAE;IAAEC,IAAI;IAAEF,SAAS;IAAEG,SAAS;IAAEC,OAAO;IAAEC;EAAM,CAAC,CAAC,GAC7DnB,kBAAkB,EAAE;EAEtBP,SAAS,CAAC,MAAM;IACdc,QAAQ,CAACT,WAAW,EAAE,CAAC;IACvB,IAAIU,KAAK,EAAEO,OAAO,CAACP,KAAK,CAAC,CAACY,MAAM,EAAE;EACpC,CAAC,EAAE,CAACb,QAAQ,EAAEQ,OAAO,EAAEP,KAAK,CAAC,CAAC;EAE9Bf,SAAS,CAAC,MAAM;IACd,IAAIwB,SAAS,EAAEV,QAAQ,CAACR,YAAY,CAACiB,IAAI,CAACK,IAAI,CAAC,CAAC;EAClD,CAAC,EAAE,CAACJ,SAAS,EAAEV,QAAQ,EAAES,IAAI,EAAEJ,aAAa,CAAC,CAAC;EAE9C,IAAIU,OAAO,GAAG,EAAE;EAEhB,IAAIR,SAAS,EAAE;IACbQ,OAAO,gBACLlB,OAAA;MAAKmB,SAAS,EAAC,WAAW;MAAAC,QAAA,eACxBpB,OAAA;QAAAoB,QAAA,EAAI;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAK;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAEtB;EACH,CAAC,MAAM,IAAIX,SAAS,EAAE;IACpB,IAAIR,UAAU,EAAE;MACdoB,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEd,IAAI,CAACK,IAAI,CAACU,SAAS,CAAC;MACtDF,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEd,IAAI,CAACK,IAAI,CAACW,QAAQ,CAAC;IACtD,CAAC,MAAM;MACLH,YAAY,CAACI,UAAU,CAAC,WAAW,CAAC;MACpCJ,YAAY,CAACI,UAAU,CAAC,UAAU,CAAC;IACrC;IAEAX,OAAO,gBACLlB,OAAA;MAAMmB,SAAS,EAAC,cAAc;MAAAC,QAAA,gBAC5BpB,OAAA,CAACF,WAAW;QAAAuB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG,eACfxB,OAAA,CAACH,YAAY;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAEnB;EACH,CAAC,MAAM,IAAIV,OAAO,EAAE;IAClBI,OAAO,gBACLlB,OAAA;MAAKmB,SAAS,EAAC,OAAO;MAAAC,QAAA,gBACpBpB,OAAA;QAAGmB,SAAS,EAAC,WAAW;QAAAC,QAAA,EAAC;MAAQ;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAI,eACrCxB,OAAA;QAAGmB,SAAS,EAAC,WAAW;QAAAC,QAAA,GAAC,OAEvB,eAAApB,OAAA;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAM,KAAC,EAACT,KAAK,CAACH,IAAI,CAACkB,OAAO;MAAA;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACxB,eACJxB,OAAA;QAAAoB,QAAA,eACEpB,OAAA,CAACV,OAAO;UAACyC,EAAE,EAAC,GAAG;UAAAX,QAAA,EAAC;QAAiB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAU;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACzC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAEP;EACH;EAEA,OAAON,OAAO;AAChB,CAAC;AAAAhB,EAAA,CAzDKD,OAAO;EAAA,QACMT,WAAW,EACdD,WAAW,EACNA,WAAW,EACRA,WAAW,EAG/BK,kBAAkB;AAAA;AAAAoC,EAAA,GAPhB/B,OAAO;AA0Db,eAAeA,OAAO;AAAA,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}