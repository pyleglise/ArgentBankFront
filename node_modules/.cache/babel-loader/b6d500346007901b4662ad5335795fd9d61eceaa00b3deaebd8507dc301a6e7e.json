{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pierre-Yves\\\\Sync\\\\Emploi\\\\OpenClassroom\\\\Formation JavascriptReact\\\\P13\\\\argentbank-front\\\\src\\\\features\\\\auth\\\\Logout.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { logingOut, logingPending, selectCurrentIsAuth } from './authSlice';\nimport { userPending, userQuit } from '../profile/userSlice';\nimport '../../utils/style/_global.scss';\n\n/**\r\n * Component that displays the Logout page and remove the authorization infos from the state and the locastorage\\\r\n * No props\r\n *\r\n * @namespace\r\n * @component\r\n * @author  Pierre-Yves Léglise <pleglise@pm.me>\r\n * @example\r\n * return{\r\n *  <Logout />\r\n * }\r\n * @returns {JSX.Element}   A JSX.Element that displays the Logout Page\r\n *\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Logout = () => {\n  _s();\n  const [count, setCount] = useState(3);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const isAuth = useSelector(selectCurrentIsAuth);\n  const signOut = () => {\n    if (isAuth) {\n      dispatch(logingPending());\n      dispatch(userPending());\n      dispatch(logingOut());\n      dispatch(userQuit());\n      localStorage.removeItem('token');\n      localStorage.removeItem('firstName');\n      localStorage.removeItem('lastName');\n    }\n  };\n  useEffect(() => {\n    if (!isAuth) {\n      const interval = setInterval(() => {\n        setCount(seconds => seconds - 1);\n      }, 1000);\n      count === 0 && navigate('/');\n      return () => clearInterval(interval);\n    }\n  }, [isAuth, navigate, count]);\n  if (!isAuth) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"temp-div home-div\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"User already logged out.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), \"Redirection in \", count, \" sec.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"temp-div home-div\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Are you sure you want to sign out ?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      className: \"main-nav-item\",\n      onClick: () => signOut(),\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"edit-button\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa-solid fa-arrow-right-from-bracket\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), \" Sign Out\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      className: \"main-nav-item\",\n      to: -1,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"edit-button\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa-solid fa-arrow-left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), \" No ! Go back\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(Logout, \"Std4fIjY4RTg7neECqel1hKr0MM=\", false, function () {\n  return [useNavigate, useDispatch, useSelector];\n});\n_c = Logout;\nexport default Logout;\nvar _c;\n$RefreshReg$(_c, \"Logout\");","map":{"version":3,"names":["useState","useEffect","Link","useNavigate","useDispatch","useSelector","logingOut","logingPending","selectCurrentIsAuth","userPending","userQuit","jsxDEV","_jsxDEV","Logout","_s","count","setCount","navigate","dispatch","isAuth","signOut","localStorage","removeItem","interval","setInterval","seconds","clearInterval","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","to","_c","$RefreshReg$"],"sources":["C:/Users/Pierre-Yves/Sync/Emploi/OpenClassroom/Formation JavascriptReact/P13/argentbank-front/src/features/auth/Logout.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { Link, useNavigate } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { logingOut, logingPending, selectCurrentIsAuth } from './authSlice'\r\nimport { userPending, userQuit } from '../profile/userSlice'\r\nimport '../../utils/style/_global.scss'\r\n\r\n/**\r\n * Component that displays the Logout page and remove the authorization infos from the state and the locastorage\\\r\n * No props\r\n *\r\n * @namespace\r\n * @component\r\n * @author  Pierre-Yves Léglise <pleglise@pm.me>\r\n * @example\r\n * return{\r\n *  <Logout />\r\n * }\r\n * @returns {JSX.Element}   A JSX.Element that displays the Logout Page\r\n *\r\n */\r\nconst Logout = () => {\r\n  const [count, setCount] = useState(3)\r\n  const navigate = useNavigate()\r\n  const dispatch = useDispatch()\r\n  const isAuth = useSelector(selectCurrentIsAuth)\r\n\r\n  const signOut = () => {\r\n    if (isAuth) {\r\n      dispatch(logingPending())\r\n      dispatch(userPending())\r\n      dispatch(logingOut())\r\n      dispatch(userQuit())\r\n      localStorage.removeItem('token')\r\n      localStorage.removeItem('firstName')\r\n      localStorage.removeItem('lastName')\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!isAuth) {\r\n      const interval = setInterval(() => {\r\n        setCount((seconds) => seconds - 1)\r\n      }, 1000)\r\n      count === 0 && navigate('/')\r\n      return () => clearInterval(interval)\r\n    }\r\n  }, [isAuth, navigate, count])\r\n\r\n  if (!isAuth) {\r\n    return (\r\n      <div className=\"temp-div home-div\">\r\n        <p>\r\n          User already logged out.\r\n          <br />\r\n          Redirection in {count} sec.\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"temp-div home-div\">\r\n      <p>Are you sure you want to sign out ?</p>\r\n      <Link className=\"main-nav-item\" onClick={() => signOut()} to=\"/\">\r\n        <button className=\"edit-button\">\r\n          <i className=\"fa-solid fa-arrow-right-from-bracket\" /> Sign Out\r\n        </button>\r\n      </Link>\r\n      <Link className=\"main-nav-item\" to={-1}>\r\n        <button className=\"edit-button\">\r\n          <i className=\"fa-solid fa-arrow-left\" /> No ! Go back\r\n        </button>\r\n      </Link>\r\n    </div>\r\n  )\r\n}\r\nexport default Logout\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}