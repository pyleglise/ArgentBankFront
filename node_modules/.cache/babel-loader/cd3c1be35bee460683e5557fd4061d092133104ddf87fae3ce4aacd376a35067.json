{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pierre-Yves\\\\Sync\\\\Emploi\\\\OpenClassroom\\\\Formation JavascriptReact\\\\P13\\\\argentbank-front\\\\src\\\\features\\\\profile\\\\UserWelcome.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { userError, userPending, userFullName } from './userSlice';\nimport { useSetUserMutation } from './userApiSlice';\nimport '../../utils/style/_userWelcome.scss';\n\n/**\r\n * Component/page that displays the header of the profile page.\\\r\n * This header contains the functionnality to edit user name.\\\r\n * It is called by the Profile component.\r\n * No props\r\n *\r\n * @namespace\r\n * @component\r\n * @author  Pierre-Yves Léglise <pleglise@pm.me>\r\n * @example\r\n * return{\r\n *  <UserWelcome />\r\n * }\r\n * @returns {JSX.Element}   A JSX.Element that displays the Home Page\r\n *\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserWelcome = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    isLoading,\n    firstName,\n    lastName\n  } = useSelector(state => state.user);\n  const {\n    token,\n    isRemember\n  } = useSelector(state => state.auth);\n  const [editButton, setEditButton] = useState('');\n  const [setUser] = useSetUserMutation();\n  const editNameButton = e => {\n    e.preventDefault();\n    setEditButton(current => !current);\n  };\n  const [userName, setUserFullName] = useState({\n    firstName: '',\n    lastName: ''\n  });\n  const handelChange = _ref => {\n    let {\n      currentTarget\n    } = _ref;\n    const {\n      value,\n      name\n    } = currentTarget;\n    setUserFullName({\n      ...userName,\n      [name]: value\n    });\n  };\n  const submitHandler = async e => {\n    e.preventDefault();\n    dispatch(userPending());\n    try {\n      const userData = await setUser({\n        token: token,\n        userFullName: userName\n      }).unwrap();\n      dispatch(userFullName(userData.body));\n      if (isRemember) {\n        localStorage.setItem('firstName', userData.body.firstName);\n        localStorage.setItem('lastName', userData.body.lastName);\n      } else {\n        localStorage.removeItem('firstName');\n        localStorage.removeItem('lastName');\n      }\n      setEditButton(current => !current);\n    } catch (error) {\n      console.log(error.data.message);\n      dispatch(userError(error.data.message));\n    }\n  };\n  return isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"temp-div \",\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !editButton ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Welcome back\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), firstName + ' ' + lastName, \" !\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: editNameButton,\n        className: \"edit-button\",\n        children: \"Edit Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Welcome back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"welcome-edit-container\",\n        onSubmit: submitHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"welcome-user-edit-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: firstName,\n            name: \"firstName\",\n            onChange: handelChange,\n            tabIndex: \"1\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"edit-button\",\n            type: \"submit\",\n            tabIndex: \"3\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"welcome-user-edit-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: lastName,\n            name: \"lastName\",\n            onChange: handelChange,\n            tabIndex: \"2\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: editNameButton,\n            className: \"edit-button\",\n            tabIndex: \"4\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(UserWelcome, \"dJoLu0Q8Ugx92j51gyc+mdLxB2U=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSetUserMutation];\n});\n_c = UserWelcome;\nexport default UserWelcome;\nvar _c;\n$RefreshReg$(_c, \"UserWelcome\");","map":{"version":3,"names":["useState","useDispatch","useSelector","userError","userPending","userFullName","useSetUserMutation","jsxDEV","_jsxDEV","Fragment","_Fragment","UserWelcome","_s","dispatch","isLoading","firstName","lastName","state","user","token","isRemember","auth","editButton","setEditButton","setUser","editNameButton","e","preventDefault","current","userName","setUserFullName","handelChange","_ref","currentTarget","value","name","submitHandler","userData","unwrap","body","localStorage","setItem","removeItem","error","console","log","data","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","type","placeholder","onChange","tabIndex","required","_c","$RefreshReg$"],"sources":["C:/Users/Pierre-Yves/Sync/Emploi/OpenClassroom/Formation JavascriptReact/P13/argentbank-front/src/features/profile/UserWelcome.jsx"],"sourcesContent":["import { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { userError, userPending, userFullName } from './userSlice'\r\nimport { useSetUserMutation } from './userApiSlice'\r\nimport '../../utils/style/_userWelcome.scss'\r\n\r\n/**\r\n * Component/page that displays the header of the profile page.\\\r\n * This header contains the functionnality to edit user name.\\\r\n * It is called by the Profile component.\r\n * No props\r\n *\r\n * @namespace\r\n * @component\r\n * @author  Pierre-Yves Léglise <pleglise@pm.me>\r\n * @example\r\n * return{\r\n *  <UserWelcome />\r\n * }\r\n * @returns {JSX.Element}   A JSX.Element that displays the Home Page\r\n *\r\n */\r\nconst UserWelcome = () => {\r\n  const dispatch = useDispatch()\r\n  const { isLoading, firstName, lastName } = useSelector((state) => state.user)\r\n  const { token, isRemember } = useSelector((state) => state.auth)\r\n  const [editButton, setEditButton] = useState('')\r\n  const [setUser] = useSetUserMutation()\r\n\r\n  const editNameButton = (e) => {\r\n    e.preventDefault()\r\n    setEditButton((current) => !current)\r\n  }\r\n\r\n  const [userName, setUserFullName] = useState({\r\n    firstName: '',\r\n    lastName: '',\r\n  })\r\n  const handelChange = ({ currentTarget }) => {\r\n    const { value, name } = currentTarget\r\n    setUserFullName({\r\n      ...userName,\r\n      [name]: value,\r\n    })\r\n  }\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault()\r\n    dispatch(userPending())\r\n    try {\r\n      const userData = await setUser({\r\n        token: token,\r\n        userFullName: userName,\r\n      }).unwrap()\r\n      dispatch(userFullName(userData.body))\r\n      if (isRemember) {\r\n        localStorage.setItem('firstName', userData.body.firstName)\r\n        localStorage.setItem('lastName', userData.body.lastName)\r\n      } else {\r\n        localStorage.removeItem('firstName')\r\n        localStorage.removeItem('lastName')\r\n      }\r\n      setEditButton((current) => !current)\r\n    } catch (error) {\r\n      console.log(error.data.message)\r\n      dispatch(userError(error.data.message))\r\n    }\r\n  }\r\n\r\n  return isLoading ? (\r\n    <div className=\"temp-div \">\r\n      <h1>Loading...</h1>\r\n    </div>\r\n  ) : (\r\n    <>\r\n      {!editButton ? (\r\n        <div className=\"header\">\r\n          <h1>\r\n            Welcome back\r\n            <br />\r\n            {firstName + ' ' + lastName} !\r\n          </h1>\r\n          <button onClick={editNameButton} className=\"edit-button\">\r\n            Edit Name\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"header\">\r\n          <h1>Welcome back</h1>\r\n          <form className=\"welcome-edit-container\" onSubmit={submitHandler}>\r\n            <div className=\"welcome-user-edit-left\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder={firstName}\r\n                name=\"firstName\"\r\n                onChange={handelChange}\r\n                tabIndex=\"1\"\r\n                required\r\n              />\r\n              <button className=\"edit-button\" type=\"submit\" tabIndex=\"3\">\r\n                Save\r\n              </button>\r\n            </div>\r\n            <div className=\"welcome-user-edit-right\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder={lastName}\r\n                name=\"lastName\"\r\n                onChange={handelChange}\r\n                tabIndex=\"2\"\r\n                required\r\n              />\r\n              <button\r\n                onClick={editNameButton}\r\n                className=\"edit-button\"\r\n                tabIndex=\"4\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\nexport default UserWelcome\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}